<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Velocity AI | Voice Interface</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .glow { box-shadow: 0 0 20px rgba(59, 130, 246, 0.5); }
        .listening { animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { transform: scale(1); opacity: 1; } 50% { transform: scale(1.1); opacity: 0.7; } 100% { transform: scale(1); opacity: 1; } }
    </style>
</head>
<body class="bg-[#020617] text-white min-h-screen flex flex-col items-center justify-center p-6 font-mono">

    <div class="max-w-2xl w-full text-center">
        <div id="ai-orb" class="w-32 h-32 bg-blue-600 rounded-full mx-auto mb-8 glow flex items-center justify-center transition-all duration-500">
            <i class="fa-solid fa-microphone text-4xl"></i>
        </div>

        <h1 class="text-3xl font-bold mb-2 tracking-tighter">VELOCITY AI INTERFACE</h1>
        <p id="status" class="text-blue-400 text-sm mb-12">System Ready. Awaiting Voice Command...</p>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-left">
            <div class="bg-[#0f172a] p-4 rounded-xl border border-blue-900/50">
                <span class="text-blue-500 text-xs">COMMAND 01</span>
                <p class="text-sm">"Change theme to red"</p>
            </div>
            <div class="bg-[#0f172a] p-4 rounded-xl border border-blue-900/50">
                <span class="text-blue-500 text-xs">COMMAND 02</span>
                <p class="text-sm">"Tell me the time"</p>
            </div>
            <div class="bg-[#0f172a] p-4 rounded-xl border border-blue-900/50">
                <span class="text-blue-500 text-xs">COMMAND 03</span>
                <p class="text-sm">"Who is the developer?"</p>
            </div>
            <div class="bg-[#0f172a] p-4 rounded-xl border border-blue-900/50">
                <span class="text-blue-500 text-xs">COMMAND 04</span>
                <p class="text-sm">"Go to my portfolio"</p>
            </div>
        </div>

        <div id="output" class="mt-10 p-6 bg-white/5 rounded-2xl italic text-gray-400 min-h-[60px]">
            "Listening for your voice..."
        </div>
    </div>

<script>
    const orb = document.getElementById('ai-orb');
    const status = document.getElementById('status');
    const output = document.getElementById('output');

    // AI Personality & Memory
    const AI_NAME = "Velocity Alpha";
    let userName = localStorage.getItem('user_name') || "";

    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    const recognition = new SpeechRecognition();
    recognition.continuous = false; // Set to false for better "turn-taking" conversation
    recognition.lang = 'en-US';

    // The "Brain" - Pattern Matching for Human-like conversation
    const brain = {
        "hello": ["Hello Warren. How can I assist your mission today?", "Systems online. I am ready when you are.", "Greetings. Your velocity is looking constant today."],
        "who are you": [`I am ${AI_NAME}, a neural interface developed by Warren Musungu in 2026.`],
        "how are you": ["My processors are running at peak efficiency. I feel... optimized.", "I am functioning perfectly. Thank you for asking."],
        "your name": [`My designation is ${AI_NAME}, but you can call me your assistant.`],
        "thank you": ["You are welcome. Productivity is its own reward.", "No problem, Warren. What is our next move?"],
        "my name is": (text) => {
            const name = text.split("my name is ")[1];
            localStorage.setItem('user_name', name);
            return `Pleased to meet you, ${name}. I have logged your identity into my core memory.`;
        }
    };

    recognition.onstart = () => {
        orb.classList.add('listening', 'bg-red-600');
        status.innerText = "ALPHABEAM ACTIVE: SPEAK NOW...";
    };

    recognition.onresult = (event) => {
        const transcript = event.results[0][0].transcript.toLowerCase();
        output.innerText = `You: "${transcript}"`;
        processCommand(transcript);
    };

    recognition.onend = () => {
        orb.classList.remove('listening', 'bg-red-600');
        status.innerText = "System Idle. Tap the orb to speak.";
    };

    function processCommand(text) {
        let response = "I heard you, but that command is not in my current logic. Should I search the web?";

        // Check the "Brain" for a match
        for (let key in brain) {
            if (text.includes(key)) {
                if (typeof brain[key] === 'function') {
                    response = brain[key](text);
                } else {
                    const options = brain[key];
                    response = options[Math.floor(Math.random() * options.length)];
                }
                break;
            }
        }

        // Action Commands
        if (text.includes("time")) response = `The current system time is ${new Date().toLocaleTimeString()}.`;
        if (text.includes("clear memory")) {
            localStorage.clear();
            response = "Memory wiped. I no longer know who you are.";
        }

        speak(response);
    }

    function speak(text) {
        const synth = window.speechSynthesis;
        const utter = new SynthesisUtterance(text);
        
        // Make it sound more "Cyber"
        utter.pitch = 0.9; 
        utter.rate = 1.1; 
        
        // Find a cool voice if available
        const voices = synth.getVoices();
        utter.voice = voices.find(v => v.name.includes("Google UK English Male")) || voices[0];

        utter.onstart = () => {
            status.innerText = "VELOCITY AI IS RESPONDING...";
            orb.classList.add('bg-green-500'); // Glow green when talking
        };
        utter.onend = () => {
            status.innerText = "Awaiting next command...";
            orb.classList.remove('bg-green-500');
        };

        synth.speak(utter);
    }

    orb.onclick = () => recognition.start();
</script>
</body>
</html>
